/* Example of using dynamic structures in C    	     */#include <stdio.h>#include "queue.h"#include <ctype.h>#include <unistd.h>#include <sys/types.h>#include <sys/stat.h>#include <fcntl.h>#include <errno.h>/* Function prototypes */void Menu (int *choice);listelement * AddFromFile (listelement * listpointer);void save_queue(listelement *list_head);int main (void) {    listelement *listpointer;    int     data,            choice;    listpointer = NULL;    do {	Menu (&choice);	switch (choice) {	    case 1: 		printf ("Input value ");		scanf ("%d", &data);		listpointer = AddItem (listpointer, data);		break;	    case 2: 		if (listpointer == NULL)		    printf ("Empty!\n");		else		    listpointer = RemoveItem (listpointer);		break;	    case 3:	        listpointer = AddFromFile (listpointer);	        break;	    case 4:	        save_queue (listpointer);	        break;	    case 5:	        break;	    default: 		printf ("Invalid option, try again\n");		break;	}    } while (choice != 5);    ClearQueue (listpointer);    return 0;}				/* main */void Menu (int *choice) {    char    local;    printf ("\nType\n\t1 for adding an element,\n\t2 for removing\n\t3 for reading from a file\n\t4 for writing to a file\n\t5 for exiting\n");    do {		local = getchar ();		if ((isdigit (local) == FALSE) && (local != '\n')) {			printf ("\nInput value.\n");			printf ("\nType\n\t1 for adding an element,\n\t2 for removing\n\t3 for reading from a file\n\t4 for writing to a file\n\t5 for exiting\n");		}    } while (isdigit ((unsigned char) local) == FALSE);    *choice = (int) local - '0';}listelement * AddFromFile (listelement * listpointer){  char * filename = "fila.txt"; /* File name */  FILE * fp; /* File pointer */  int elem;  /* Open file. Abort program when opening the file goes wrong. */  if ((fp = fopen (filename,"r"))==NULL) {    perror("Error opening file\n");  }  else {    while (!feof(fp)) {      fscanf (fp,"%d ",&elem);      listpointer = AddItem (listpointer, elem);    }  fclose (fp);  }  return (listpointer);}void save_queue(listelement *list_head) {  char * filename = "fila.txt"; /* File name*/  FILE * fp; /* pointer to File */  listelement *tmp = list_head;  if ((fp = fopen (filename,"w"))==NULL) {    perror("Error opeing file\n");  }  else {    while (tmp != NULL) {      fprintf (fp,"%d ",tmp->dataitem);      tmp = (listelement  *) (tmp->link);    }    fclose (fp);  }  return;}